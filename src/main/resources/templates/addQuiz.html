<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>AddQuiz</title>
    <link rel="stylesheet" th:href="@{assets/css/add-quiz.css}">
</head>
<body>
<h1>Add Quiz</h1>

    <form
        role="form"
        method="post"
        th:action="@{/createNewCourse}"
        th:object="${quizListForm}"
    >
        <div id="quiz-container">
            <label for="quiz-title">Quiz Name:</label>
            <input type="text" id="quiz-title" th:field="*{quizDTO.quizName}" required>

            <label for="quiz-des">Quiz Short Description:</label>
            <input type="text" id="quiz-des" th:field="*{quizDTO.quizDes}" required>

            <label for="quiz-time">Quiz Short Description:</label>
            <input type="time" id="quiz-time" th:field="*{quizDTO.quizPeriod}" required>
        </div>
        <div id="add-quiz-form">
            <div>
                Question:<input type="text" id="question" name="questionDTO-content" required><br>

                Option A:<input type="text" id="optionA" name="answerDTO-content" required>
                Is correct:<input type="radio" id="isCorrectA" value="optionA" name="isCorrect">
                <input type="text" id="ordinalA" name="answerDTO-ordinal" value="optionA"><br>

                Option B:<input type="text" id="optionB" name="answerDTO-content" required>
                Is correct:<input type="radio" id="isCorrectB1" value="optionA" name="isCorrect">
                <input type="text" id="ordinalB" name="answerDTO-ordinal" value="optionA"><br>

                Option C:<input type="text" id="optionC1" name="answerDTO-content" required>
                Is correct:<input type="radio" id="isCorrectC1" value="optionA" name="isCorrect">
                <input type="text" id="ordinalC" name="answerDTO-ordinal" value="optionC"><br>

                Option D:<input type="text" id="optionD1" name="answerDTO-content" required>
                Is correct:<input type="radio" id="isCorrectD1" value="optionA" name="isCorrect">
                <input type="text" id="ordinalD" name="answerDTO-ordinal" value="optionD"><br>
            </div>
            <button id="create-quiz">Create quiz</button>
        </div>
        <button type="submit" id="next-btn" value="Add new lesson" name="submit">Add new lesson</button>
        <button type="submit" id="submit-btn" value="Create course" name="submit">Create course</button>
    </form>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        // Initialize
        const quizContainer = document.getElementById("create-quiz");

        quizContainer.addEventListener("click", function (){
            createQuesAndAnsForm();
        })

        function createQuesAndAnsForm(){
            // Get the parent element for the new form
            const formContainer = document.getElementById("add-quiz-form");

            // Create a new form group
            const formGroup = document.createElement("div");
            formGroup.classList.add("form-group");

            // Create a label for the question input
            const questionLabel = document.createElement("label");
            questionLabel.setAttribute("for", "question");
            questionLabel.textContent = "Question:";
            formGroup.appendChild(questionLabel);

            // Create the question input
            const questionInput = document.createElement("input");
            questionInput.setAttribute("type", "text");
            questionInput.setAttribute("id", "question");
            questionInput.setAttribute("name", "questionDTO-content");
            questionInput.setAttribute("required", "");
            formGroup.appendChild(questionInput);

            // Create the answer inputs
            const answerInputs = document.createElement("div");
            answerInputs.classList.add("answer-inputs");

            // Create the answer A input group
            const answerGroupA = createAnswerInputGroup("A");
            answerInputs.appendChild(answerGroupA);

            // Create the answer B input group
            const answerGroupB = createAnswerInputGroup("B");
            answerInputs.appendChild(answerGroupB);

            // Create the answer C input group
            const answerGroupC = createAnswerInputGroup("C");
            answerInputs.appendChild(answerGroupC);

            // Create the answer D input group
            const answerGroupD = createAnswerInputGroup("D");
            answerInputs.appendChild(answerGroupD);

            formGroup.appendChild(answerInputs);

            // Add the new form group to the parent element
            formContainer.appendChild(formGroup);
        }

        function createAnswerInputGroup(answerId) {
            const answerGroup = document.createElement("div");
            answerGroup.classList.add("answer-group");

            // Create the answer input
            const answerInput = document.createElement("input");
            answerInput.setAttribute("type", "text");
            answerInput.setAttribute("id", "option" + answerId);
            answerInput.setAttribute("name", "answerDTO-content");
            answerInput.setAttribute("required", "");
            answerGroup.appendChild(answerInput);

            // Create the "is correct" radio button
            const isCorrectRadio = document.createElement("input");
            isCorrectRadio.setAttribute("type", "radio");
            isCorrectRadio.setAttribute("id", "isCorrect" + answerId);
            isCorrectRadio.setAttribute("value", "option" + answerId);
            isCorrectRadio.setAttribute("name", "isCorrect");
            answerGroup.appendChild(isCorrectRadio);

            // Create the answer ordinal input
            const ordinalInput = document.createElement("input");
            ordinalInput.setAttribute("type", "text");
            ordinalInput.setAttribute("id", "ordinal" + answerId);
            ordinalInput.setAttribute("name", "answerDTO-ordinal");
            ordinalInput.setAttribute("value", "option" + answerId);
            answerGroup.appendChild(ordinalInput);

            return answerGroup;
        }
    });
</script>
</body>
</html>